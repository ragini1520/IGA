import React, { useState } from 'react';
import { Upload, TrendingUp, Hash, Clock, BarChart3, Zap, Video, Image, X, CheckCircle } from 'lucide-react';

const InstaGrowthAssistant = () => {
  const [activeTab, setActiveTab] = useState('caption');
  const [videoFile, setVideoFile] = useState(null);
  const [videoPreview, setVideoPreview] = useState(null);
  const [caption, setCaption] = useState('');
  const [hashtags, setHashtags] = useState([]);
  const [loading, setLoading] = useState(false);
  const [uploadSuccess, setUploadSuccess] = useState(false);

  // Handle video upload with preview
  const handleVideoUpload = (e) => {
    const file = e.target.files[0];
    if (file) {
      setVideoFile(file);
      setUploadSuccess(true);
      
      // Create video preview URL
      const url = URL.createObjectURL(file);
      setVideoPreview(url);
      
      // Reset after showing success
      setTimeout(() => setUploadSuccess(false), 2000);
    }
  };

  // Remove uploaded video
  const removeVideo = () => {
    setVideoFile(null);
    if (videoPreview) {
      URL.revokeObjectURL(videoPreview);
      setVideoPreview(null);
    }
  };

  // Simulated AI Caption Generation
  const generateCaption = () => {
    if (!videoFile) {
      alert('Please upload a video first!');
      return;
    }
    
    setLoading(true);
    setTimeout(() => {
      setCaption(`‚ú® Transform your space with stunning interiors!\n\nApne sapno ka ghar ab aur bhi kareeb hai. Premium sunmica aur modular designs jo aapke budget mein fit ho jaye!\n\nSwipe to see the magic ‚û°Ô∏è\n\nüìû Call now for FREE consultation!\n\n#InteriorDesign #HomeDecor #ModularKitchen #SunmicaDesigns #IndianHomes #InteriorIndia #HomeRenovation #LuxuryInteriors #AffordableInteriors #DreamHome #InteriorInspo #ReelItFeelIt`);
      setHashtags([
        { tag: '#InteriorDesign', trend: 'High', engagement: '8.2%' },
        { tag: '#HomeDecor', trend: 'High', engagement: '7.8%' },
        { tag: '#ModularKitchen', trend: 'Medium', engagement: '6.5%' },
        { tag: '#InteriorIndia', trend: 'High', engagement: '9.1%' },
        { tag: '#LuxuryInteriors', trend: 'Medium', engagement: '5.9%' }
      ]);
      setLoading(false);
    }, 2000);
  };

  const TabButton = ({ name, icon: Icon, label }) => (
    <button
      onClick={() => setActiveTab(name)}
      className={`flex items-center gap-2 px-4 py-2 rounded-lg transition ${
        activeTab === name
          ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white'
          : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
      }`}
    >
      <Icon className="w-4 h-4" />
      {label}
    </button>
  );

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-4">
      <div className="max-w-6xl mx-auto">
        {/* Header */}
        <div className="text-center mb-8">
          <h1 className="text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2">
            üì± Instagram Growth Assistant
          </h1>
          <p className="text-gray-600">AI-Powered Content Creation & Analytics Tool</p>
        </div>

        {/* Navigation Tabs */}
        <div className="flex gap-2 mb-6 flex-wrap justify-center">
          <TabButton name="caption" icon={Zap} label="AI Caption" />
          <TabButton name="hashtags" icon={Hash} label="Hashtags" />
          <TabButton name="timing" icon={Clock} label="Best Time" />
          <TabButton name="analytics" icon={BarChart3} label="Analytics" />
        </div>

        {/* Main Content Area */}
        <div className="bg-white rounded-2xl shadow-xl p-6">
          {/* Caption Generator Tab */}
          {activeTab === 'caption' && (
            <div className="space-y-6">
              <h2 className="text-2xl font-bold text-gray-800 flex items-center gap-2">
                <Zap className="text-yellow-500" />
                AI Caption Generator
              </h2>

              {/* Video Upload Section */}
              <div className="border-2 border-dashed border-gray-300 rounded-xl p-6 hover:border-purple-400 transition">
                <input
                  type="file"
                  accept="video/*"
                  onChange={handleVideoUpload}
                  className="hidden"
                  id="video-upload"
                />
                
                {!videoFile ? (
                  <label
                    htmlFor="video-upload"
                    className="flex flex-col items-center justify-center cursor-pointer"
                  >
                    <Video className="w-12 h-12 text-gray-400 mb-3" />
                    <span className="text-lg font-medium text-gray-700 mb-1">
                      Click to upload video
                    </span>
                    <span className="text-sm text-gray-500">MP4, MOV up to 500MB</span>
                  </label>
                ) : (
                  <div className="space-y-4">
                    {/* Video Preview */}
                    {videoPreview && (
                      <div className="relative bg-black rounded-lg overflow-hidden">
                        <video
                          src={videoPreview}
                          controls
                          className="w-full max-h-96 object-contain"
                        />
                      </div>
                    )}
                    
                    {/* File Info */}
                    <div className="flex items-center justify-between bg-green-50 p-4 rounded-lg">
                      <div className="flex items-center gap-3">
                        <CheckCircle className="w-5 h-5 text-green-600" />
                        <div>
                          <p className="font-medium text-gray-800">{videoFile.name}</p>
                          <p className="text-sm text-gray-600">
                            {(videoFile.size / (1024 * 1024)).toFixed(2)} MB
                          </p>
                        </div>
                      </div>
                      <button
                        onClick={removeVideo}
                        className="p-2 hover:bg-red-100 rounded-full transition"
                      >
                        <X className="w-5 h-5 text-red-600" />
                      </button>
                    </div>
                  </div>
                )}
              </div>

              {/* Language Mix Slider */}
              <div className="space-y-2">
                <label className="text-sm font-medium text-gray-700">Language Mix</label>
                <input
                  type="range"
                  min="0"
                  max="100"
                  className="w-full h-2 bg-gradient-to-r from-blue-500 to-orange-500 rounded-lg appearance-none cursor-pointer"
                />
                <div className="flex justify-between text-xs text-gray-600">
                  <span>üá¨üáß English</span>
                  <span>üáÆüá≥ Hinglish</span>
                </div>
              </div>

              {/* Generate Button */}
              <button
                onClick={generateCaption}
                disabled={loading || !videoFile}
                className={`w-full py-4 rounded-xl font-semibold text-lg transition ${
                  loading || !videoFile
                    ? 'bg-gray-300 text-gray-500 cursor-not-allowed'
                    : 'bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-purple-600 hover:to-pink-600 shadow-lg hover:shadow-xl'
                }`}
              >
                {loading ? 'üîÑ Generating...' : '‚ú® Generate Caption'}
              </button>

              {/* Generated Output Section - Separate Box */}
              {caption && (
                <div className="mt-8 border-t-4 border-purple-500 pt-6">
                  <div className="bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 space-y-6">
                    <div className="flex items-center justify-between">
                      <h3 className="text-xl font-bold text-gray-800 flex items-center gap-2">
                        ‚ú® Your AI-Generated Content
                      </h3>
                      <button
                        onClick={() => {
                          navigator.clipboard.writeText(caption);
                          alert('Caption copied to clipboard!');
                        }}
                        className="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition text-sm font-medium"
                      >
                        üìã Copy All
                      </button>
                    </div>

                    {/* Caption Box */}
                    <div className="bg-white rounded-lg p-6 shadow-md">
                      <h4 className="text-sm font-semibold text-gray-600 mb-3 uppercase tracking-wide">
                        üìù Caption
                      </h4>
                      <p className="text-gray-800 whitespace-pre-wrap leading-relaxed">
                        {caption}
                      </p>
                    </div>

                    {/* Hashtag Performance Box */}
                    <div className="bg-white rounded-lg p-6 shadow-md">
                      <h4 className="text-sm font-semibold text-gray-600 mb-4 uppercase tracking-wide">
                        üè∑Ô∏è Trending Hashtags
                      </h4>
                      <div className="space-y-3">
                        {hashtags.map((item, i) => (
                          <div
                            key={i}
                            className="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition"
                          >
                            <span className="font-medium text-purple-600">{item.tag}</span>
                            <div className="flex gap-4 text-sm">
                              <span className={`px-2 py-1 rounded ${
                                item.trend === 'High' ? 'bg-green-100 text-green-700' : 'bg-yellow-100 text-yellow-700'
                              }`}>
                                {item.trend}
                              </span>
                              <span className="text-gray-600 font-medium">{item.engagement}</span>
                            </div>
                          </div>
                        ))}
                      </div>
                    </div>

                    {/* Quick Stats */}
                    <div className="grid grid-cols-3 gap-4">
                      <div className="bg-white rounded-lg p-4 text-center shadow-md">
                        <p className="text-2xl font-bold text-purple-600">287</p>
                        <p className="text-xs text-gray-600">Character Count</p>
                      </div>
                      <div className="bg-white rounded-lg p-4 text-center shadow-md">
                        <p className="text-2xl font-bold text-pink-600">12</p>
                        <p className="text-xs text-gray-600">Hashtags</p>
                      </div>
                      <div className="bg-white rounded-lg p-4 text-center shadow-md">
                        <p className="text-2xl font-bold text-blue-600">8.2%</p>
                        <p className="text-xs text-gray-600">Avg Engagement</p>
                      </div>
                    </div>
                  </div>
                </div>
              )}
            </div>
          )}

          {/* Hashtag Research Tab */}
          {activeTab === 'hashtags' && (
            <div className="space-y-6">
              <h2 className="text-2xl font-bold text-gray-800">Hashtag Performance</h2>
              <div className="space-y-3">
                {[
                  { tag: '#InteriorDesign', posts: '45M', trend: 'üìà Rising', engagement: '8.2%' },
                  { tag: '#HomeDecor', posts: '38M', trend: 'üî• Hot', engagement: '7.8%' },
                  { tag: '#ModularKitchen', posts: '2.1M', trend: 'üìà Rising', engagement: '6.5%' },
                  { tag: '#InteriorIndia', posts: '890K', trend: 'üî• Hot', engagement: '9.1%' },
                  { tag: '#IndianHomes', posts: '1.5M', trend: '‚û°Ô∏è Stable', engagement: '5.4%' }
                ].map((item, i) => (
                  <div key={i} className="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                    <div>
                      <p className="font-semibold text-purple-600">{item.tag}</p>
                      <p className="text-sm text-gray-600">{item.posts} posts</p>
                    </div>
                    <div className="flex gap-4 items-center">
                      <span className="text-sm">{item.trend}</span>
                      <span className="px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium">
                        {item.engagement}
                      </span>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          )}

          {/* Best Time Tab */}
          {activeTab === 'timing' && (
            <div className="space-y-6">
              <h2 className="text-2xl font-bold text-gray-800">Best Time to Post</h2>
              <div className="bg-gradient-to-br from-blue-50 to-purple-50 p-6 rounded-xl">
                <div className="grid grid-cols-7 gap-2 mb-4">
                  {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (
                    <div key={day} className="text-center font-semibold text-gray-700">{day}</div>
                  ))}
                </div>
                <div className="space-y-2">
                  {Array.from({ length: 7 }).map((_, i) => (
                    <div key={i} className="grid grid-cols-7 gap-2">
                      {['Morning', 'Afternoon', 'Evening'].map((time, j) => (
                        <div
                          key={j}
                          className={`h-12 rounded flex items-center justify-center text-xs ${
                            Math.random() > 0.5 ? 'bg-green-200' : 'bg-yellow-100'
                          }`}
                        >
                          {time}
                        </div>
                      ))}
                    </div>
                  ))}
                </div>
              </div>
              <div className="bg-purple-50 p-6 rounded-xl">
                <h3 className="font-bold text-gray-800 mb-3">üéØ Peak Engagement Times:</h3>
                <ul className="space-y-2 text-gray-700">
                  <li>‚Ä¢ Monday Evening (6-9 PM) - 12.4% avg engagement</li>
                  <li>‚Ä¢ Wednesday Afternoon (2-5 PM) - 11.8% avg engagement</li>
                  <li>‚Ä¢ Friday Evening (7-10 PM) - 13.2% avg engagement</li>
                </ul>
              </div>
            </div>
          )}

          {/* Analytics Tab */}
          {activeTab === 'analytics' && (
            <div className="space-y-6">
              <h2 className="text-2xl font-bold text-gray-800">Growth Analytics</h2>
              <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div className="bg-gradient-to-br from-purple-100 to-purple-200 p-6 rounded-xl">
                  <p className="text-3xl font-bold text-purple-700">+248</p>
                  <p className="text-sm text-gray-700">Followers (7 days)</p>
                  <p className="text-green-600 text-sm font-semibold">+12.4% ‚Üë</p>
                </div>
                <div className="bg-gradient-to-br from-pink-100 to-pink-200 p-6 rounded-xl">
                  <p className="text-3xl font-bold text-pink-700">8.7%</p>
                  <p className="text-sm text-gray-700">Avg Engagement</p>
                  <p className="text-green-600 text-sm font-semibold">+2.1% ‚Üë</p>
                </div>
                <div className="bg-gradient-to-br from-blue-100 to-blue-200 p-6 rounded-xl">
                  <p className="text-3xl font-bold text-blue-700">45.2K</p>
                  <p className="text-sm text-gray-700">Reach (7 days)</p>
                  <p className="text-green-600 text-sm font-semibold">+18.3% ‚Üë</p>
                </div>
              </div>
              <div className="space-y-3">
                <h3 className="font-bold text-gray-800">üî• Top Performing Posts</h3>
                {[
                  { title: 'Kitchen Makeover Reel', engagement: '12.4%', reach: '18.2K', likes: '2.1K' },
                  { title: 'Living Room Design', engagement: '10.8%', reach: '15.7K', likes: '1.8K' },
                  { title: 'Bedroom Transformation', engagement: '9.2%', reach: '12.4K', likes: '1.5K' }
                ].map((post, i) => (
                  <div key={i} className="bg-gray-50 p-4 rounded-lg">
                    <p className="font-semibold text-gray-800 mb-2">{post.title}</p>
                    <div className="flex gap-4 text-sm text-gray-600">
                      <span>Engagement: {post.engagement}</span>
                      <span>Reach: {post.reach}</span>
                      <span>Likes: {post.likes}</span>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          )}
        </div>

        {/* Footer Info */}
        <div className="text-center mt-8 text-gray-600 text-sm space-y-1">
          <p>üí° This tool uses AI to analyze and optimize your Instagram content</p>
          <p>üîí 100% Safe ‚Ä¢ No Login Required ‚Ä¢ Privacy First</p>
        </div>
      </div>
    </div>
  );
};

export default InstaGrowthAssistant;
